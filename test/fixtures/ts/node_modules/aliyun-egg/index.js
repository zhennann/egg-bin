'use strict';

const egg = require('../../../../../node_modules/egg');

module.exports = Object.assign({}, egg);

module.exports.startCluster = options => {
  console.log('options.typescript=%s', options.typescript);
  console.log('options: %j', options);
  if (process.execArgv.length) {
    console.log('process.execArgv:', process.execArgv);
  }

  // make sure exit
  setTimeout(() => {
    console.log('exit by master test end');
    process.exit(0);
  }, require('os').platform() === 'win32' ? 11000 : 10000);
  return egg.startCluster(options);
};
